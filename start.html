
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script type="text/javascript">
            'use strict'
            console.log("test");

            const authStorageName = "gitHubAuth";


            function logIn(username, password) {
                let auth = btoa(username + ":" + password);

                localStorage.setItem(authStorageName, auth);
            }

            function getRequest(url){

                let auth = localStorage.getItem(authStorageName);
                if (!auth) {
                    throw "Not logged in";
                }

                return jQuery.ajax({
                    url: url,
                    headers: { Authorization: "Basic " + auth }
                });

            }

            function PullRequest(pullReuqestResponse) {
                this.api_response = pullReuqestResponse;

                this.isClosed = function() {
                    return pullReuqestResponse.closed_at === null;
                }

            }

            async function GetPullRequests(repoName) {
                const data = await getRequest(`https://api.github.com/repos/${repoName}/pulls`)
                console.log(data)
                let toReturn = [];
                let count = 0;
                data.forEach(function (value) {
                    toReturn[count] = new PullRequest(value);
                    count += 1;
                });

                
                return toReturn;

            }


        </script>
    </head>
    <body>
        this is a file
    </body>
</html>
